<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <script src="../js/ExternalJs/jquery.min.js"></script>
  <script src="https://kit.fontawesome.com/19e06ea1de.js" crossorigin="anonymous"></script>
  <link href="https://fonts.googleapis.com/css2?family=Nunito:wght@300&display=swap" rel="stylesheet">
  <link rel="shortcut icon" href="../assets/favicon.ico" type="image/x-icon">
  <link rel="stylesheet" href="../css/utility.css">
  <link rel="stylesheet" href="../css/style.css">
  <title>jQuery | Modifying</title>
</head>

<body class="container">
  <h1 class="h1">Modifying HTML</h1>
  <div id="content"></div>

  <script>
    const pessoas = [
      { nome: 'Ana', nota: 9.1, idade: 21, sexo: 'F' },
      { nome: 'Bianca', nota: 8.4, idade: 19, sexo: 'F', },
      { nome: 'Carlos', nota: 7.6, idade: 23, sexo: 'M', },
      { nome: 'Julia', nota: 9.7, idade: 18, sexo: 'F', },
    ]

    $(document).ready(createTable(pessoas, '#content', 'Class Score'))

    function createTable(array, appendTarget, title = 'Title') {
      const table = $('<table></table>').appendTo(appendTarget);
      const caption = $('<caption>').append(title).appendTo(table)
      const row = $('<tr>').appendTo(table);
      let final = [];

      // Search and set table Headers;
      array.map(obj => final = final.concat(Object.keys(obj)));
      const tableHeaders = new Set(final);
      for (let title of tableHeaders) $('<th>').append(title).appendTo(row);

      // Define table data and append it to where it's due;  
      array.map((obj, index) => {
        const row = $('<tr>').appendTo(table);
        Object.values(obj).map(p => $('<td>').append(p).appendTo(row));
      });
    }
  </script>
</body>

</html>